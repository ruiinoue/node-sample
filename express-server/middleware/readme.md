# ミドルウェア

- Web アプリケーションのリクエストレスポンスサイクルにおいて任意の処理を行う関数

## ミドルウェアでできること

- 任意のコード実行
- リクエストオブジェクト、レスポンスオブジェクトの変更
- リクエストレスポンスサイクルの終了
- スタック内の次のミドルウェア呼び出し

## ミドルウェアの作成方法

- 通常処理

```
function (req, res, next) {
    // ここに処理
    next();
}
```

- エラー処理

```
function (err, req, res, next) {
    // ここに処理
    next();
}
```

エラー処理は引数が 4 つに増える。

## ミドルウェアの利用方法

`use`メソッドで使用することができる。

```
var express = require('express');
var app = express();

app.use((req, res, next) => {
    // ここにミドルウェアは入る
});

app.listen(3000);
```
